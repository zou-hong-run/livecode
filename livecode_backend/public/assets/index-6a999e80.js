import{e as Q,c as L,x as de,n as X,m as he,k as ge,w as N,T as G,t as M,h as B,a as me,S as we,U as ye,a4 as Se,$ as xe,l as be,a2 as O,_ as J,p as Te,K as R,j as pe}from"./index-98350ca9.js";import{K as Ce,c as S,d as H,b as y,a as b,r as Z,w as A,o as ee,B as ze,A as Ie,h as $e,n as te}from"./index-f8123759.js";function ae(e){const i=Ce();i&&Q(i.proxy,e)}const[Pe,E]=L("loading"),_e=Array(12).fill(null).map((e,i)=>S("i",{class:E("line",String(i+1))},null)),Ae=S("svg",{class:E("circular"),viewBox:"25 25 50 50"},[S("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ee={size:X,type:he("circular"),color:String,vertical:Boolean,textSize:X,textColor:String};var De=H({name:Pe,props:Ee,setup(e,{slots:i}){const v=y(()=>Q({color:e.color},de(e.size))),o=()=>{const t=e.type==="spinner"?_e:Ae;return S("span",{class:E("spinner",e.type),style:v.value},[i.icon?i.icon():t])},s=()=>{var t;if(i.default)return S("span",{class:E("text"),style:{fontSize:ge(e.textSize),color:(t=e.textColor)!=null?t:e.color}},[i.default()])};return()=>{const{type:t,vertical:f}=e;return S("div",{class:E([t,{vertical:f}]),"aria-live":"polite","aria-busy":!0},[o(),s()])}}});const He=N(De);function Me(e,i){return e>i?"horizontal":i>e?"vertical":""}function Oe(){const e=b(0),i=b(0),v=b(0),o=b(0),s=b(0),t=b(0),f=b(""),u=b(!0),x=()=>f.value==="vertical",d=()=>f.value==="horizontal",n=()=>{v.value=0,o.value=0,s.value=0,t.value=0,f.value="",u.value=!0};return{move:m=>{const p=m.touches[0];v.value=(p.clientX<0?0:p.clientX)-e.value,o.value=p.clientY-i.value,s.value=Math.abs(v.value),t.value=Math.abs(o.value);const C=10;(!f.value||s.value<C&&t.value<C)&&(f.value=Me(s.value,t.value)),u.value&&(s.value>G||t.value>G)&&(u.value=!1)},start:m=>{n(),e.value=m.touches[0].clientX,i.value=m.touches[0].clientY},reset:n,startX:e,startY:i,deltaX:v,deltaY:o,offsetX:s,offsetY:t,direction:f,isVertical:x,isHorizontal:d,isTap:u}}const[ne,k]=L("swipe"),ke={loop:M,width:X,height:X,vertical:Boolean,autoplay:B(0),duration:B(500),touchable:M,lazyRender:Boolean,initialSwipe:B(0),indicatorColor:String,showIndicators:M,stopPropagation:M},ie=Symbol(ne);var Xe=H({name:ne,props:ke,emits:["change","dragStart","dragEnd"],setup(e,{emit:i,slots:v}){const o=b(),s=b(),t=Z({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let f=!1;const u=Oe(),{children:x,linkChildren:d}=me(ie),n=y(()=>x.length),r=y(()=>t[e.vertical?"height":"width"]),h=y(()=>e.vertical?u.deltaY.value:u.deltaX.value),m=y(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-r.value*n.value:0),p=y(()=>r.value?Math.ceil(Math.abs(m.value)/r.value):n.value),C=y(()=>n.value*r.value),z=y(()=>(t.active+n.value)%n.value),K=y(()=>{const a=e.vertical?"vertical":"horizontal";return u.direction.value===a}),le=y(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${t.offset}px)`};if(r.value){const c=e.vertical?"height":"width",l=e.vertical?"width":"height";a[c]=`${C.value}px`,a[l]=e[l]?`${e[l]}px`:""}return a}),oe=a=>{const{active:c}=t;return a?e.loop?R(c+a,-1,n.value):R(c+a,0,p.value):c},U=(a,c=0)=>{let l=a*r.value;e.loop||(l=Math.min(l,-m.value));let w=c-l;return e.loop||(w=R(w,m.value,0)),w},T=({pace:a=0,offset:c=0,emitChange:l})=>{if(n.value<=1)return;const{active:w}=t,g=oe(a),_=U(g,c);if(e.loop){if(x[0]&&_!==m.value){const Y=_<m.value;x[0].setOffset(Y?C.value:0)}if(x[n.value-1]&&_!==0){const Y=_>0;x[n.value-1].setOffset(Y?-C.value:0)}}t.active=g,t.offset=_,l&&g!==w&&i("change",z.value)},D=()=>{t.swiping=!0,t.active<=-1?T({pace:n.value}):t.active>=n.value&&T({pace:-n.value})},se=()=>{D(),u.reset(),O(()=>{t.swiping=!1,T({pace:-1,emitChange:!0})})},V=()=>{D(),u.reset(),O(()=>{t.swiping=!1,T({pace:1,emitChange:!0})})};let W;const $=()=>clearTimeout(W),P=()=>{$(),+e.autoplay>0&&n.value>1&&(W=setTimeout(()=>{V(),P()},+e.autoplay))},I=(a=+e.initialSwipe)=>{if(!o.value)return;const c=()=>{var l,w;if(!J(o)){const g={width:o.value.offsetWidth,height:o.value.offsetHeight};t.rect=g,t.width=+((l=e.width)!=null?l:g.width),t.height=+((w=e.height)!=null?w:g.height)}n.value&&(a=Math.min(n.value-1,a),a===-1&&(a=n.value-1)),t.active=a,t.swiping=!0,t.offset=U(a),x.forEach(g=>{g.setOffset(0)}),P()};J(o)?te().then(c):c()},F=()=>I(t.active);let j;const ce=a=>{!e.touchable||a.touches.length>1||(u.start(a),f=!1,j=Date.now(),$(),D())},ue=a=>{e.touchable&&t.swiping&&(u.move(a),K.value&&(!e.loop&&(t.active===0&&h.value>0||t.active===n.value-1&&h.value<0)||(Te(a,e.stopPropagation),T({offset:h.value}),f||(i("dragStart",{index:z.value}),f=!0))))},q=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-j,c=h.value/a;if((Math.abs(c)>.25||Math.abs(h.value)>r.value/2)&&K.value){const w=e.vertical?u.offsetY.value:u.offsetX.value;let g=0;e.loop?g=w>0?h.value>0?-1:1:0:g=-Math[h.value>0?"ceil":"floor"](h.value/r.value),T({pace:g,emitChange:!0})}else h.value&&T({pace:0});f=!1,t.swiping=!1,i("dragEnd",{index:z.value}),P()},re=(a,c={})=>{D(),u.reset(),O(()=>{let l;e.loop&&a===n.value?l=t.active===0?0:a:l=a%n.value,c.immediate?O(()=>{t.swiping=!1}):t.swiping=!1,T({pace:l-t.active,emitChange:!0})})},ve=(a,c)=>{const l=c===z.value,w=l?{backgroundColor:e.indicatorColor}:void 0;return S("i",{style:w,class:k("indicator",{active:l})},null)},fe=()=>{if(v.indicator)return v.indicator({active:z.value,total:n.value});if(e.showIndicators&&n.value>1)return S("div",{class:k("indicators",{vertical:e.vertical})},[Array(n.value).fill("").map(ve)])};return ae({prev:se,next:V,state:t,resize:F,swipeTo:re}),d({size:r,props:e,count:n,activeIndicator:z}),A(()=>e.initialSwipe,a=>I(+a)),A(n,()=>I(t.active)),A(()=>e.autoplay,P),A([we,ye,()=>e.width,()=>e.height],F),A(Se(),a=>{a==="visible"?P():$()}),ee(I),ze(()=>I(t.active)),xe(()=>I(t.active)),Ie($),$e($),be("touchmove",ue,{target:s}),()=>{var a;return S("div",{ref:o,class:k()},[S("div",{ref:s,style:le.value,class:k("track",{vertical:e.vertical}),onTouchstartPassive:ce,onTouchend:q,onTouchcancel:q},[(a=v.default)==null?void 0:a.call(v)]),fe()])}}});const Ke=N(Xe),[Ye,Be]=L("swipe-item");var Re=H({name:Ye,setup(e,{slots:i}){let v;const o=Z({offset:0,inited:!1,mounted:!1}),{parent:s,index:t}=pe(ie);if(!s)return;const f=y(()=>{const d={},{vertical:n}=s.props;return s.size.value&&(d[n?"height":"width"]=`${s.size.value}px`),o.offset&&(d.transform=`translate${n?"Y":"X"}(${o.offset}px)`),d}),u=y(()=>{const{loop:d,lazyRender:n}=s.props;if(!n||v)return!0;if(!o.mounted)return!1;const r=s.activeIndicator.value,h=s.count.value-1,m=r===0&&d?h:r-1,p=r===h&&d?0:r+1;return v=t.value===r||t.value===m||t.value===p,v}),x=d=>{o.offset=d};return ee(()=>{te(()=>{o.mounted=!0})}),ae({setOffset:x}),()=>{var d;return S("div",{class:Be(),style:f.value},[u.value?(d=i.default)==null?void 0:d.call(i):null])}}});const Ue=N(Re);export{He as L,Ue as S,Oe as a,Ke as b,ae as u};
