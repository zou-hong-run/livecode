import{c as O,a6 as N,n as P,t as y,P as A,H as B,a7 as E,I as U,w as V}from"./index-c28695b9.js";import{I as j}from"./index-e9f2f527.js";import{d as R,a as _,c,u as q,N as z,b as D,i as F,q as H,z as M,s as J,l as L,O as b,F as K,t as Q,k as S,P as Z,Q as G,_ as W}from"./index-46928ffb.js";import{e as X,f as Y,h as $,S as ee,i as te}from"./index-de31b9a3.js";const[ae,o]=O("nav-bar"),ne={title:String,fixed:Boolean,zIndex:P,border:y,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:y};var oe=R({name:ae,props:ne,emits:["clickLeft","clickRight"],setup(e,{emit:d,slots:n}){const r=_(),u=N(r,o),s=l=>d("clickLeft",l),h=l=>d("clickRight",l),f=()=>n.left?n.left():[e.leftArrow&&c(U,{class:o("arrow"),name:"arrow-left"},null),e.leftText&&c("span",{class:o("text")},[e.leftText])],m=()=>n.right?n.right():c("span",{class:o("text")},[e.rightText]),g=()=>{const{title:l,fixed:C,border:p,zIndex:w}=e,v=A(w),x=e.leftArrow||e.leftText||n.left,I=e.rightText||n.right;return c("div",{ref:r,style:v,class:[o({fixed:C}),{[E]:p,"van-safe-area-top":e.safeAreaInsetTop}]},[c("div",{class:o("content")},[x&&c("div",{class:[o("left"),e.clickable?B:""],onClick:s},[f()]),c("div",{class:[o("title"),"van-ellipsis"]},[n.title?n.title():l]),I&&c("div",{class:[o("right"),e.clickable?B:""],onClick:h},[m()])])])};return()=>e.fixed&&e.placeholder?u(g):g()}});const ce=V(oe);const re=e=>(Z("data-v-4fec42c7"),e=e(),G(),e),se=re(()=>L("h3",{style:{"text-align":"center",color:"white"}},"长按图片扫码",-1)),le=["onTouchstart","onTouchend"],ie=R({__name:"showcode",setup(e){const d=q(),n=z();let r=_({codeTitle:"什么都没有",codeDescription:"什么都没有",childrenIds:[],changeValue:0,logoUrl:"string",id:"什么都没有",count:0}),u=_([]),s=_({id:"string",codeUrl:"uploads/404.png",count:0}),h=n.query.id,f=n.query.show;h||(alert("参数错误！！！"),d.push("/"));const m=async(a,t)=>{f||await $(a,t)},g=async(a,t)=>{await te(a,t)};(async a=>{let t=await X(a);if(t.length!==0){let i=JSON.parse(t[0].childrenIds);r.value={...t[0]},await m(a,r.value.count),i.forEach(async T=>{let k=await Y(T);k.length!==0&&(u.value.push(k[0]),C())})}})(h);const C=()=>{let a=Q(u.value),t=a.find(i=>i.count!==r.value.changeValue);t?s.value=t:s.value=a[0]},p=D(()=>ee+"/"+s.value.codeUrl),w=()=>history.back();let v;const x=()=>{v=setTimeout(async()=>{let{id:a,count:t}=s.value;await g(a,t)},600)},I=()=>{clearTimeout(v)};return(a,t)=>{const i=ce,T=j;return S(),F(K,null,[H(f)?(S(),M(i,{key:0,title:"秀活码","left-text":"返回","left-arrow":"",onClickLeft:w})):J("",!0),se,L("div",{onTouchstart:b(x,["prevent"]),onTouchend:b(I,["prevent"]),class:"image"},[c(T,{src:p.value},null,8,["src"])],40,le)],64)}}});const ge=W(ie,[["__scopeId","data-v-4fec42c7"]]);export{ge as default};
